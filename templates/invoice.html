{% load cart_tag %}
<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>


<div class="container" >
	<div id="invoice">
		<div style="padding:30px;">
			<div class="row" >
				<div class="col-xs-12">
					<div class="invoice-title">
						<h2>Invoice</h2><h3 class="pull-right">Order # {{data.id}}</h3>
					</div>
					<hr>
					<div class="row">
						<div class="col-xs-6">
							<address>
							<strong>Billed To:</strong><br>
								{{request.user.first_name}} {{request.user.last_name}}<br>
								
							</address>
						</div>
						
					</div>
					<div class="row">
						<div class="col-xs-6">
							<address>
								<strong>Payment Method:</strong><br>
								COD<br>
							</address>
						</div>
						<div class="col-xs-6 text-right">
							<address>
								<strong>Order Date:</strong><br>
								{{data1}}<br><br>
							</address>
						</div>
					</div>
				</div>
			</div>
			
			<div class="row">
				<div class="col-md-12">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title"><strong>Order summary</strong></h3>
						</div>
						<div class="panel-body">
							<div class="table-responsive">
								<table class="table table-condensed">
									<thead>
								<tr>
											<td><strong>Item</strong></td>
											<td class="text-center"><strong>Price</strong></td>
											<td class="text-center"><strong>Quantity</strong></td>
											<td class="text-right"><strong>Totals</strong></td>
								</tr>
									</thead>
									<tbody>
										<!-- foreach ($order->lineItems as $line) or some such thing here -->
										{% for key,value in request.session.cart.items %}
										<tr>
											<td>{{value.name}} </td>
											<td class="text-center">{{value.price}} </td>
											<td class="text-center"> {{value.quantity}}</td>
											<td class="text-right">{{ value.price|multiply:value.quantity }}</td>
										</tr>
										{% endfor %}
								
										<tr>
											<td class="thick-line"></td>
											<td class="thick-line"></td>
											<td class="thick-line text-center"><strong>Subtotal</strong></td>
											<td class="thick-line text-right">{{cart_total_amount}}</td>
										</tr>
										
										<tr>
											<td class="no-line"></td>
											<td class="no-line"></td>
											<td class="no-line text-center"><strong>Total</strong></td>
											<td class="no-line text-right">{{cart_total_amount}}</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
				
			</div>
		</div>
	</div>	

	
</div>


<div class="d-flex text-center " style="display: flex;justify-content: space-around;">
	<a href="{% url 'mainpage' %}">Back To Home</a>
	<button style="padding: 10px; background-color: #0095ff; border: none; color: #fff; font-size: 20px; " id="downloadInvoice">Download</button>
    </div>


<script>
	window.onload = function() {
	    document.getElementById("downloadInvoice").addEventListener("click",()=>{
		  const invoice = document.getElementById("invoice");
		  html2pdf().from(invoice).save();

	    })
	}
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.1/html2pdf.bundle.js"></script>